<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://highcharts.github.io/export-csv/export-csv.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://blacklabel.github.io/grouped_categories/grouped-categories.js"></script>
    <script src="https://code.highcharts.com/modules/drilldown.js"></script>
</head>

<center>
<div id="2020_05_EintritteThurgauerMuseen_2019" style="height: 550px; max-width: 800px;"></div>
</center> 
<script>

	$(document).ready(function() {
    	var chart = {
        	type: 'pie',
            spacingBottom: 40
  		};

        var plotOptions = {
        	pie: {
            	dataLabels: {
					enabled: false
            	},
                showInLegend: true
        	}
    	};
        var title = {
          text: "Thurgauer Museen empfangen 2019 rund 211'000 Besucherinnen und Besucher",
          style: {
            fontSize: '18px',
          },
          align: 'left'
        };
        var subtitle = {
          text: 'Thurgauer Museen nach Anzahl Eintritten¹, Kanton Thurgau, 2019, Anteile in %',
          style: {
            fontSize: '12px'
          },
          align: 'left'
        };
    	var series = [{
        	innerSize: '40%',
        	name: 'Eintritte',
        	colorByPoint: true,
        	data: [{
            	name: "Mehr als 10'000 Eintritte",
            	y: 151033,
                drilldown: "Mehr als 10'000 Eintritte",
                selected: true
        	},{
            	name: "5'000 bis 10'000 Eintritte",
            	y: 24720,
                drilldown: "5'000 bis 10'000 Eintritte",
                selected: true
        	}, {
            	name: "2'000 bis 5'000 Eintritte",
            	y: 17555,
                drilldown: "2'000 bis 5'000 Eintritte",
                selected: true
        	}, {
            	name: "500 bis 2'000 Eintritte",
            	y: 17668,
                selected: false
        	}]
    	}];
        var drilldown = {
        	series: [{
            	innerSize: '40%',
                name: "Anteile nach Museum",
            	id: "Mehr als 10'000 Eintritte",
                tooltip: {
            		valueSuffix: ' Eintritte'
                	},
            	data: [
                	['Kunstmuseum Thurgau/Ittinger Museum',30590],
                    ['Mosterei- und Brennereimuseum Möhl, Arbon',30283],
                    ['Napoleonmuseum und Park Arenenberg',24222],
                    ['Archäologie- und Naturmuseum Thurgau ',22196],
                    ['Autobau Erlebniswelt',17055],
                    ['Historisches Museum Thurgau (inkl. Schaudepot Katharinental)',15687],
                    ['Bodensee Planetarium und Sternwarte, Kreuzlingen',11000]
            	]
        	}, {
		innerSize: '40%',            	
				name: "Anteil nach Museum",
            	id: "5'000 bis 10'000 Eintritte",
            	data: [
                	
                	['SAURER Museum Arbon',9852],
                    ['Seemuseum Kreuzlingen',7868], 
                    ['Museum Rosenegg',7000]
            	]
        	}, {
		innerSize: '40%',
               	name: "Anteil nach Museum",
            	id: "2'000 bis 5'000 Eintritte",
            	data: [
               		['Historisches Museum Bischofszell, Museumsgesellschaft Bischofszell',3360],
                    ['Kunstraum Kreuzlingen',2650],
                    ['Kleines Hausmuseum St. Katharinental',2550],
                    ['Schulmuseum Mühlebach',2406],
                    ['Museum am Hafen Romanshorn',2387],
                    ['Museumsbahn Stein am Rhein (Etzwilen)-Singen',2123],             
                    ['Historisches Museum Arbon, Museumsgesellschaft Arbon',2079]
            	]
        	
                }],
                activeDataLabelStyle: {
                cursor: 'pointer',
                fontWeight: 'bold',
                fontSize: '12px'				
            }
        };
        var tooltip = {
            formatter: function() {
            	if (this.point.name=="Mehr als 10'000 Eintritte" || this.point.name=="5'000 bis 10'000 Eintritte" || this.point.name=="2'000 bis 5'000 Eintritte") {
                return '<span style="font-size:11px">' + this.series.name + '</span><br><span style="color:'+ this.point.color + '">\u25CF </span><span style="font-weight: normal;">' + this.point.name + '</span>: <b>' + round(this.percentage,1) + ' % </b>('+ addThousandsep(this.point.y) + ' </b>Eintritte)<br>' + 'Hier klicken für Anteil nach Museum';
                } else {
            	return '<span style="font-size:11px">' + this.series.name + '</span><br><span style="color:'+ this.point.color + '">\u25CF </span><span style="font-weight: normal;">' + this.point.name + '</span>: <b>' + round(this.percentage,1) + ' % </b>('+ addThousandsep(this.point.y) + ' </b>Eintritte)<br>';
            }
           }
    	};
        var legend = {
                layout: 'horizontal',
                align: 'center',
                verticalAlign: 'bottom',
				padding: 25,
			itemDistance: 10,
    			symbolPadding: 10,
    			symbolWidth: 25,
                margin: -10,
				itemStyle: {
                	fontWeight: 'normal'
            	}
            };
            
        var credits = {
          text: '<span style="font-size: 10px; font-weight: bold; color: #27408B">Hinweis: Für die Anteile nach Museen klicken Sie auf das jeweilige Kreissegment.</span><br><b>¹</b> Nur Museen mit über 500 Eintritten pro Jahr berücksichtigt<br>Dienststelle für Statistik Kanton Thurgau <br>Datenquelle: Kulturamt Kanton Thurgau',
          href: false,
          style: {
          	cursor: false,
          	fontSize:'10px'
          },
          position: {
            align: 'left',
            x: 10,
            y: -45
          }
        };
        var exporting = {
          allowHTML: true,
          enabled: true,
          filename:'2020_05_EintritteThurgauerMuseen_2019',
          buttons: {
            contextButton: {
              menuItems: "printChart separator downloadPNG downloadJPEG downloadSVG".split(" ")
            }
          },
          csv: {
            columnHeaderFormatter: function (item) {
              if(item instanceof Highcharts.Axis) {
                return 'Kategorie';
              } else {
                if(item instanceof Highcharts.Series) {
                  return item.name;
                }
              }
            }
          }
        };
        var highchartsOptions = Highcharts.setOptions ({
        	lang: {
        		decimalPoint: '.',
           	 	thousandsSep: "'",
           	 	months: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
            	weekdays: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
            	shortMonths: ['Jan', 'Feb', 'Mrz', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
            	contextButtonTitle: 'Drucken, Download, Export',
            	downloadJPEG: 'Download JPEG Bild',
            	downloadPNG: 'Download PNG Bild',
            	downloadSVG: 'Download SVG Vektor Bild',
            	downloadXLS: 'Download XLS',
            	printChart: 'Bild drucken',
            	viewData: 'Datentabelle ein-/ausblenden',
            	resetZoom: "Zoom zurücksetzen",
            	resetZoomTitle: "Zoom zurücksetzen",
            	drillUpText: "Zurück"
        	}        
		});
        var colors = ['#27408B','#0064e6','#00B4E8','#FFED00','#a2c510','#3CA433','#B5B5B5','#878787','#333333','#E39E00', '#CD3700','#8B0000']

        
        var json = {};
        json.chart = chart;
        json.plotOptions = plotOptions;
        json.title = title;
        json.subtitle = subtitle;
        json.series = series;
        json.drilldown = drilldown;
        json.tooltip = tooltip;
        json.legend = legend;
        json.credits = credits;
        json.exporting = exporting;
        json.highchartsOptions = highchartsOptions;
        json.colors = colors;
        
        
        $('#2020_05_EintritteThurgauerMuseen_2019').highcharts(json);
    });
    
    
function addThousandsep(nStr) {
                               nStr += '';
                               x = nStr.split('.');
                               x1 = x[0];
                               x2 = x.length > 1 ? '.' + x[1] : '';
                               var rgx = /(\d+)(\d{3})/;
                               while (rgx.test(x1)) {
                x1 = x1.replace(rgx, '$1' + "'" + '$2');
                               }
                               return x1 + x2;
                               }
function round(value, decimals) {
  return Number(Math.round(value+'e'+decimals)+'e-'+decimals);
  }

</script>
