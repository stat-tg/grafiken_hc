<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
	<script src="https://highcharts.github.io/export-csv/export-csv.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://code.highcharts.com/modules/sankey.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>

</head>
<center>
    <div id="2023_10_Panaschierstimmfluesse_NRWahlen_2023" style="max-width: 800px; height: 720px"></div>
</center>
    <script>
$(document).ready(function() {
            var chart = {

                zoomType: 'xy',
                spacingBottom: 55
            };
            var title = {
                text: 'Mitte-Wählerinnen und -Wähler geben am meisten Stimmen an andere Parteien ab',
                style: {
                    fontSize: '18px'
                },
                align: 'left'
            };

            
            var subtitle = {
                text: 'Panaschierstimmenflüsse bei Nationalratswahlen, Kanton Thurgau, 2023',
                style: {
                    fontSize: '12px'
                },
                align: 'left'
            };

			
            
            var xAxis = {
                title: {
                    text: ""
                    }
            };

            var yAxis = {
                gridLineWidth: 1,
                lineWidth: 1,
                 title: {
                    text: ""
                    }
            };
            
            var accessibility = {
        point: {
            valueDescriptionFormat: '{index}. {point.from} to {point.to}, {point.weight}.'
        }
    };
			           
			var series = [{
            	 keys: ['from', 'to', 'weight','color'],
                 data: [
                     ['SVP','Die Mitte (Empfängerpartei)',3,'#4B8A3E'],
['SVP','FDP (Empfängerpartei)',14,'#4B8A3E'],
['SVP','SP (Empfängerpartei)',1,'#4B8A3E'],
['SVP','GLP (Empfängerpartei)',0,'#4B8A3E'],
['SVP','GRÜNE (Empfängerpartei)',1,'#4B8A3E'],
['SVP','EDU (Empfängerpartei)',3,'#4B8A3E'],
['SVP','EVP (Empfängerpartei)',1,'#4B8A3E'],
['SVP','AUFTG (Empfängerpartei)',4,'#4B8A3E'],
['SVP','MASS-VOLL (Empfängerpartei)',3,'#4B8A3E'],
['SVP','SVP (Empfängerpartei)',0,'#4B8A3E'],
['Die Mitte','SVP (Empfängerpartei)',30,'#D6862B'],
['Die Mitte','FDP (Empfängerpartei)',22,'#D6862B'],
['Die Mitte','SP (Empfängerpartei)',8,'#D6862B'],
['Die Mitte','GRÜNE (Empfängerpartei)',7,'#D6862B'],
['Die Mitte','GLP (Empfängerpartei)',4,'#D6862B'],
['Die Mitte','EDU (Empfängerpartei)',2,'#D6862B'],
['Die Mitte','EVP (Empfängerpartei)',5,'#D6862B'],
['Die Mitte','AUFTG (Empfängerpartei)',1,'#D6862B'],
['Die Mitte','MASS-VOLL (Empfängerpartei)',0,'#D6862B'],
['Die Mitte','Die Mitte (Empfängerpartei)',0,'#D6862B'],
['FDP','SVP (Empfängerpartei)',41,'#3872B5'],
['FDP','Die Mitte (Empfängerpartei)',6,'#3872B5'],
['FDP','SP (Empfängerpartei)',3,'#3872B5'],
['FDP','GLP (Empfängerpartei)',3,'#3872B5'],
['FDP','GRÜNE (Empfängerpartei)',4,'#3872B5'],
['FDP','EDU (Empfängerpartei)',1,'#3872B5'],
['FDP','EVP (Empfängerpartei)',2,'#3872B5'],
['FDP','AUFTG (Empfängerpartei)',1,'#3872B5'],
['FDP','MASS-VOLL (Empfängerpartei)',0,'#3872B5'],
['FDP','FDP (Empfängerpartei)',0,'#3872B5'],
['GRÜNE','SVP (Empfängerpartei)',4,'#84B547'],
['GRÜNE','FDP (Empfängerpartei)',5,'#84B547'],
['GRÜNE','SP (Empfängerpartei)',23,'#84B547'],
['GRÜNE','Die Mitte (Empfängerpartei)',5,'#84B547'],
['GRÜNE','GLP (Empfängerpartei)',5,'#84B547'],
['GRÜNE','EDU (Empfängerpartei)',0,'#84B547'],
['GRÜNE','EVP (Empfängerpartei)',3,'#84B547'],
['GRÜNE','AUFTG (Empfängerpartei)',1,'#84B547'],
['GRÜNE','MASS-VOLL (Empfängerpartei)',1,'#84B547'],
['GRÜNE','GRÜNE (Empfängerpartei)',0,'#84B547'],
['SP','SVP (Empfängerpartei)',4,'#F0554D'],
['SP','FDP (Empfängerpartei)',5,'#F0554D'],
['SP','Die Mitte (Empfängerpartei)',4,'#F0554D'],
['SP','GLP (Empfängerpartei)',3,'#F0554D'],
['SP','GRÜNE (Empfängerpartei)',18,'#F0554D'],
['SP','EDU (Empfängerpartei)',0,'#F0554D'],
['SP','EVP (Empfängerpartei)',2,'#F0554D'],
['SP','AUFTG (Empfängerpartei)',0,'#F0554D'],
['SP','MASS-VOLL (Empfängerpartei)',0,'#F0554D'],
['SP','SP (Empfängerpartei)',0,'#F0554D'],
['GLP','SVP (Empfängerpartei)',8,'#C4C43D'],
['GLP','Die Mitte (Empfängerpartei)',8,'#C4C43D'],
['GLP','FDP (Empfängerpartei)',14,'#C4C43D'],
['GLP','SP (Empfängerpartei)',11,'#C4C43D'],
['GLP','GRÜNE (Empfängerpartei)',14,'#C4C43D'],
['GLP','EDU (Empfängerpartei)',1,'#C4C43D'],
['GLP','EVP (Empfängerpartei)',3,'#C4C43D'],
['GLP','AUFTG (Empfängerpartei)',0,'#C4C43D'],
['GLP','MASS-VOLL (Empfängerpartei)',0,'#C4C43D'],
['GLP','GLP (Empfängerpartei)',0,'#C4C43D'],
['EVP','SVP (Empfängerpartei)',19,'#DEAA28'],
['EVP','Die Mitte (Empfängerpartei)',7,'#DEAA28'],
['EVP','FDP (Empfängerpartei)',9,'#DEAA28'],
['EVP','SP (Empfängerpartei)',5,'#DEAA28'],
['EVP','GRÜNE (Empfängerpartei)',5,'#DEAA28'],
['EVP','EDU (Empfängerpartei)',8,'#DEAA28'],
['EVP','GLP (Empfängerpartei)',2,'#DEAA28'],
['EVP','AUFTG (Empfängerpartei)',1,'#DEAA28'],
['EVP','MASS-VOLL (Empfängerpartei)',1,'#DEAA28'],
['EVP','EVP (Empfängerpartei)',0,'#DEAA28'],
['EDU','SVP (Empfängerpartei)',41,'#A65E42'],
['EDU','Die Mitte (Empfängerpartei)',2,'#A65E42'],
['EDU','FDP (Empfängerpartei)',3,'#A65E42'],
['EDU','SP (Empfängerpartei)',1,'#A65E42'],
['EDU','GRÜNE (Empfängerpartei)',1,'#A65E42'],
['EDU','GLP (Empfängerpartei)',0,'#A65E42'],
['EDU','EVP (Empfängerpartei)',7,'#A65E42'],
['EDU','AUFTG (Empfängerpartei)',13,'#A65E42'],
['EDU','MASS-VOLL (Empfängerpartei)',7,'#A65E42'],
['EDU','EDU (Empfängerpartei)',0,'#A65E42'],
['AUFTG','SVP (Empfängerpartei)',28,'#b5b5b5'],
['AUFTG','Die Mitte (Empfängerpartei)',1,'#b5b5b5'],
['AUFTG','FDP (Empfängerpartei)',3,'#b5b5b5'],
['AUFTG','SP (Empfängerpartei)',1,'#b5b5b5'],
['AUFTG','GRÜNE (Empfängerpartei)',3,'#b5b5b5'],
['AUFTG','EDU (Empfängerpartei)',14,'#b5b5b5'],
['AUFTG','EVP (Empfängerpartei)',2,'#b5b5b5'],
['AUFTG','GLP (Empfängerpartei)',0,'#b5b5b5'],
['AUFTG','MASS-VOLL (Empfängerpartei)',35,'#b5b5b5'],
['AUFTG','AUFTG (Empfängerpartei)',0,'#b5b5b5'],
['MASS-VOLL','SVP (Empfängerpartei)',19,'#787878'],
['MASS-VOLL','Die Mitte (Empfängerpartei)',2,'#787878'],
['MASS-VOLL','FDP (Empfängerpartei)',3,'#787878'],
['MASS-VOLL','SP (Empfängerpartei)',3,'#787878'],
['MASS-VOLL','GLP (Empfängerpartei)',0,'#787878'],
['MASS-VOLL','GRÜNE (Empfängerpartei)',3,'#787878'],
['MASS-VOLL','EDU (Empfängerpartei)',8,'#787878'],
['MASS-VOLL','EVP (Empfängerpartei)',1,'#787878'],
['MASS-VOLL','AUFTG (Empfängerpartei)',40,'#787878'],
['MASS-VOLL','MASS-VOLL (Empfängerpartei)',0,'#787878']

],
nodes: [{
      id: 'SVP (Empfängerpartei)',
			color: '#4B8A3E'
    }, {
        id: 'Die Mitte (Empfängerpartei)',
      color: '#D6862B'
    }, {
        id: 'FDP (Empfängerpartei)',
		color: '#3872B5'
     }, {
      id: 'GRÜNE (Empfängerpartei)',
			color: '#84B547'
    }, {
      id: 'SP (Empfängerpartei)',
			color: '#CD3700'
    }, {
      id: 'GLP (Empfängerpartei)',
			color: '#C4C43D'
    }, {
      id: 'EVP (Empfängerpartei)',
			color: '#DEAA28'
    }, {
      id: 'EDU (Empfängerpartei)',
			color: '#A65E42'
    }, {
      id: 'AUFTG (Empfängerpartei)',
			color: '#B5B5B5'
    }, {
      id: ' (Empfängerpartei)',
			color: '#787878'
    },{
      id: 'SVP',
			color: '#4B8A3E'
    }, {
        id: 'Die Mitte',
      color: '#D6862B'
    }, {
        id: 'FDP',
		color: '#3872B5'
     }, {
      id: 'GRÜNE',
			color: '#84B547'
    }, {
      id: 'SP',
			color: '#CD3700'
    }, {
      id: 'GLP',
			color: '#C4C43D'
    }, {
      id: 'EVP',
			color: '#DEAA28'
    }, {
      id: 'EDU',
			color: '#A65E42'
    }, {
      id: 'AUFTG',
			color: '#B5B5B5'
    }, {
      id: 'MASS-VOLL',
			color: '#787878'
    }],

type: 'sankey',
name: "Panaschiermatrix",
colorByPoint: true,


      
            }];

//var tooltip = {
//    pointFormatter: function() {
//        return `${point.toNode.name}  ${point.fromNode.name}`
//    }
//};
var tooltip = {
    headerFormat: null,
    pointFormatter: function() {
      const point = this,
        reversed = point.options.reversed;

      return reversed ?  `${point.toNode.name} \u2192 ${point.fromNode.name}: ${point.weight} Panaschierstimmen` : 
      `Von der <b>${point.fromNode.name}</b> fliessen <b>${point.weight}</b> Panaschierstimmen<br>pro 1'000 Wahlzettel der Herkunftspartei und 
      kandidierender <br>Person der Empfängerpartei zur <b>${point.toNode.name}</b>`
    },
    nodeFormatter() {
				
				return this.name;
			}
		
   // valueDecimals: 0,

  };
                var legend = {
                	enabled: false,
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom',
                    padding: 25,
                    symbolPadding: 10,
                    symbolWidth: 25,
                    margin: -10,
                    itemStyle: {
                        fontWeight: 'normal'
                    }
                };

                var credits = {
                    text: 'Berechnung: Dienststelle für Statistik Kanton Thurgau <br>Datenquellen: Staatskanzlei Kanton Thurgau',
                    href: false,
                    style: {
                        color: '#999999',
                        cursor: false,
                        fontSize: '10px'
                    },
                    position: {
                        align: 'left',
                        x: 10,
                        y: -45
                    }
                };
                var exporting = {
                    allowHTML: true,
                    enabled: true,
                    filename: '2023_10_Panaschierstimmfluesse_NRWahlen_2023',
                    buttons: {
                        contextButton: {
                            menuItems: "printChart separator downloadPNG downloadJPEG downloadSVG".split(" ")
                        }
                    },

                };
				
                var colors = ['#4B8A3E','#D6862B','#3872B5','#84B547','#F0554D','#C4C43D','#DEAA28','#A65E42','#b5b5b5','#787878'];
                var highchartsOptions = Highcharts.setOptions({
                    lang: {
                        decimalPoint: '.',
                        thousandsSep: "'",
                        months: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
                        weekdays: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
                        shortMonths: ['Jan', 'Feb', 'Mrz', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
                        contextButtonTitle: 'Drucken, Download, Export',
                        downloadJPEG: 'Download JPEG Bild',
                        downloadPNG: 'Download PNG Bild',
                        downloadSVG: 'Download SVG Vektor Bild',
                        downloadXLS: 'Download XLS',
                        printChart: 'Bild drucken',
                        viewData: 'Datentabelle ein-/ausblenden',
                        resetZoom: "Zoom zurücksetzen",
                        resetZoomTitle: "Zoom zurücksetzen",
                        drillUpText: "Zurück",
                        numericSymbols: null
                    }
                });
                


                var json = {};
                json.chart = chart;
                json.title = title;
                json.subtitle = subtitle;
                json.yAxis = yAxis;
                json.xAxis = xAxis;
                json.accessibility = accessibility;
                json.series = series;
                json.tooltip = tooltip;
                json.legend = legend;
                json.credits = credits;
                json.exporting = exporting;
                json.colors = colors;
                json.highchartsOptions = highchartsOptions;


                $('#2023_10_Panaschierstimmfluesse_NRWahlen_2023').highcharts(json);
            });
            
  function addThousandsep(nStr) {
                               nStr += '';
                               x = nStr.split('.');
                               x1 = x[0];
                               x2 = x.length > 1 ? '.' + x[1] : '';
                               var rgx = /(\d+)(\d{3})/;
                               while (rgx.test(x1)) {
                x1 = x1.replace(rgx, '$1' + "'" + '$2');
                               }
                               return x1 + x2;
                               }

</script>



