<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://highcharts.github.io/export-csv/export-csv.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://code.highcharts.com/modules/drilldown.js"></script>
    <script src="https://code.highcharts.com/modules/item-series.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
</head>
<meta charset="UTF-8">
<center>
<div id="Bubble_Chart_Bezirke_Gemeinden" style="height: 600px; max-width: 800px;"></div>
</center> 

<script>

$(document).ready(function() {
    	var chart = {
        	type: 'packedbubble',
          heigth: '100%'
        };
        var plotOptions = {
        	 packedbubble: {
             animation: { 
               duration: 100
             },
            minSize: '20%',
            maxSize: '60%',
            zMin: 0,
            zMax: 30000,
            layoutAlgorithm: {
                gravitationalConstant: 0.05,
                splitSeries: true,
                seriesInteraction: false,
                dragBetweenSeries: true,
                parentNodeLimit: true
            },
            dataLabels: {
                enabled: true,
                format: '{point.name}',
                filter: {
                    property: 'y',
                    operator: '>',
                    value: 1000
                },
                style: {
                    color: 'black',
                    textOutline: 'none',
                    fontWeight: 'normal'
                }
            }
        }
    	};
        var title = {
          text: "Bubble Chart: Bevölkerungszahlen",
          style: {
            fontSize: '18px',
          },
          align: 'left'
        };
        var subtitle = {
          text: 'Einwohnerzahlen, Politische Gemeinden, Kanton Thurgau, 2020',
          style: {
            fontSize: '12px'
          },
          align: 'left'
        };
    	var series = [{
        name: 'Arbon',
        data: [{name: 'Amriswil',value: 14157},
{name: 'Arbon',value: 14872},
{name: 'Dozwil',value: 683},
{name: 'Egnach',value: 4773},
{name: 'Hefenhofen',value: 1276},
{name: 'Horn',value: 2883},
{name: 'Kesswil',value: 997},
{name: 'Roggwil',value: 3253},
{name: 'Romanshorn',value: 11296},
{name: 'Salmsach',value: 1470},
{name: 'Sommeri',value: 622},
{name: 'Uttwil',value: 1917}]
    }, {
        name: 'Frauenfeld',
        data: [{name: 'Basadingen-Schlattingen',value: 1814},
{name: 'Berlingen',value: 907},
{name: 'Diessenhofen',value: 4091},
{name: 'Eschenz',value: 1862},
{name: 'Felben-Wellhausen',value: 2864},
{name: 'Frauenfeld',value: 25810},
{name: 'Gachnang',value: 4472},
{name: 'Herdern',value: 1114},
{name: 'Homburg',value: 1544},
{name: 'Hüttlingen',value: 825},
{name: 'Hüttwilen',value: 1763},
{name: 'Mammern',value: 677},
{name: 'Matzingen',value: 3019},
{name: 'Müllheim',value: 2994},
{name: 'Neunforn',value: 1080},
{name: 'Pfyn',value: 2094},
{name: 'Schlatt',value: 1808},
{name: 'Steckborn',value: 3828},
{name: 'Stettfurt',value: 1217},
{name: 'Thundorf',value: 1512},
{name: 'Uesslingen-Buch',value: 1090},
{name: 'Wagenhausen',value: 1765},
{name: 'Warth-Weiningen',value: 1363}]
    }, {
        name: 'Kreuzlingen',
        data: [{name: 'Altnau',value: 2336},
{name: 'Bottighofen',value: 2392},
{name: 'Ermatingen',value: 3638},
{name: 'Gottlieben',value: 334},
{name: 'Güttingen',value: 1663},
{name: 'Kemmental',value: 2592},
{name: 'Kreuzlingen',value: 22375},
{name: 'Langrickenbach',value: 1338},
{name: 'Lengwil',value: 1723},
{name: 'Münsterlingen',value: 3492},
{name: 'Raperswilen',value: 416},
{name: 'Salenstein',value: 1409},
{name: 'Tägerwilen',value: 4924},
{name: 'Wäldi',value: 1055}]
    }, {
        name: 'Münchwilen',
        data: [{name: 'Aadorf',value: 9198},
{name: 'Bettwiesen',value: 1225},
{name: 'Bichelsee-Balterswil',value: 2949},
{name: 'Braunau',value: 801},
{name: 'Eschlikon',value: 4564},
{name: 'Fischingen',value: 2831},
{name: 'Lommis',value: 1237},
{name: 'Münchwilen',value: 5821},
{name: 'Rickenbach',value: 2823},
{name: 'Sirnach',value: 7887},
{name: 'Tobel-Tägerschen',value: 1588},
{name: 'Wängi',value: 4740},
{name: 'Wilen',value: 2518}]
}, {
        name: 'Weinfelden',
        data: [{name: 'Affeltrangen',value: 2642},
{name: 'Amlikon-Bissegg',value: 1329},
{name: 'Berg',value: 3420},
{name: 'Birwinken',value: 1330},
{name: 'Bischofszell',value: 5878},
{name: 'Bürglen',value: 3946},
{name: 'Bussnang',value: 2466},
{name: 'Erlen',value: 3794},
{name: 'Hauptwil-Gottshaus',value: 2007},
{name: 'Hohentannen',value: 610},
{name: 'Kradolf-Schönenberg',value: 3653},
{name: 'Märstetten',value: 2887},
{name: 'Schönholzerswilen',value: 839},
{name: 'Sulgen',value: 3943},
{name: 'Weinfelden',value: 11588},
{name: 'Wigoltingen',value: 2560},
{name: 'Wuppenau',value: 1129},
{name: 'Zihlschlacht-Sitterdorf',value: 2478}
]
    	}];
        
        var tooltip = {
            useHTML: true,
        pointFormat: '<b>{point.name}:</b> {point.value} Einwohner</sub>'
    	};
        
        var legend = {
          layout: 'horizontal',
          align: 'center',
          verticalAlign: 'bottom',
          padding: 25,
          symbolPadding: 10,
          symbolWidth: 25,
          margin: -10,
          itemStyle: {
            fontWeight: 'normal'
          }
        };
        
        var credits = {
          text: 'Dienststelle für Statistik Kanton Thurgau <br>Datenquelle: Staatskanzlei Kanton Thurgau',
          href: false,
          style: {
          	cursor: false,
          	fontSize:'10px'
          },
          position: {
            align: 'left',
            x: 10,
            y: -20
          }
        };
        var exporting = {
          allowHTML: true,
          enabled: true,
          filename:'Bubble_Chart_Bezirke_Gemeinden',
          buttons: {
            contextButton: {
              menuItems: "printChart separator downloadPNG downloadJPEG downloadSVG".split(" ")
            }
          },
          csv: {
            columnHeaderFormatter: function (item) {
              if(item instanceof Highcharts.Axis) {
                return 'Kategorie';
              } else {
                if(item instanceof Highcharts.Series) {
                  return item.name;
                }
              }
            }
          }
        };
        var highchartsOptions = Highcharts.setOptions ({
        	lang: {
        		decimalPoint: '.',
           	 	thousandsSep: "'",
           	 	months: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
            	weekdays: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
            	shortMonths: ['Jan', 'Feb', 'Mrz', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
            	contextButtonTitle: 'Drucken, Download, Export',
            	downloadJPEG: 'Download JPEG Bild',
            	downloadPNG: 'Download PNG Bild',
            	downloadSVG: 'Download SVG Vektor Bild',
            	downloadXLS: 'Download XLS',
            	printChart: 'Bild drucken',
            	viewData: 'Datentabelle ein-/ausblenden',
            	resetZoom: "Zoom zurücksetzen",
            	resetZoomTitle: "Zoom zurücksetzen",
            	drillUpText: "Zurück"
        	}        
		});
        var colors = ['#27408B','#0064e6','#00B4E8','#a2c510','#3CA433']

        
        var json = {};
        json.chart = chart;
        json.plotOptions = plotOptions;
        json.title = title;
        json.subtitle = subtitle;
        json.series = series;
        json.tooltip = tooltip;
        json.legend = legend;
        json.credits = credits;
        json.exporting = exporting;
        json.highchartsOptions = highchartsOptions;
        json.colors = colors;
        
        
        $('#Bubble_Chart_Bezirke_Gemeinden').highcharts(json);
    });
    
    
function addThousandsep(nStr) {
                               nStr += '';
                               x = nStr.split('.');
                               x1 = x[0];
                               x2 = x.length > 1 ? '.' + x[1] : '';
                               var rgx = /(\d+)(\d{3})/;
                               while (rgx.test(x1)) {
                x1 = x1.replace(rgx, '$1' + "'" + '$2');
                               }
                               return x1 + x2;
                               }



</script>
