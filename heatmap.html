<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/heatmap.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
<script src="https://highcharts.github.io/export-csv/export-csv.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
</head>
<center>
    <div id="2020_03_Panaschierstimmfluesse_GRWahlen_BezArbon_2020" style="max-width: 800px; height: 600px"></div>   
</center>

<script>
function getPointCategoryName(point, dimension) {
    var series = point.series,
        isY = dimension === 'y',
        axis = series[isY ? 'yAxis' : 'xAxis'];
    return axis.categories[point[isY ? 'y' : 'x']];
}

$(document).ready(function() {
	
    var chart = {
        type: 'heatmap',
        marginBottom: 95,
        plotBorderWidth: 1
    };


    var title = {
        text: 'Bezirk Arbon: Panaschiermatrix',
        style: {
                    fontSize: '18px'
                },
                align: 'left'
    };
    
    var subtitle = {
                text: "Grossratswahlen 2020, Bezirk Arbon, Panaschierstimmen pro 1'000 Wahlzettel der Herkunftspartei und pro kandidierender Person der Empfängerpartei",
                style: {
                    fontSize: '12px'
                },
                align: 'left'
            };

    var xAxis = {
    	title: {
        	text: '<b>Herkunftspartei der Panaschierstimmen'
            },
        categories: ['SVP', 'FDP', 'CVP', 'SP', 'GP', 'glp', 'EVP', 'EDU'],
        opposite: true,
        lineWidth: 0
    };

    var yAxis = {
    	title: {
        	text: '<b>Empf¹ngerpartei der Panaschierstimmen'
            },
        categories: ['SVP', 'FDP', 'CVP', 'SP', 'GP', 'glp', 'EVP', 'EDU','Panaschier-<br>neigung¹'],
        reversed: true
    };

    var accessibility = {
        point: {
            descriptionFormatter: function (point) {
                var ix = point.index + 1,
                    xName = getPointCategoryName(point, 'x'),
                    yName = getPointCategoryName(point, 'y'),
                    val = point.value;
                return ix + '. ' + xName + ' gibt ab ' + yName + ', ' + val + '.';
            }
        }
    };

    var colorAxis = {
        min: 0,
        minColor: '#FFFFFF',
        maxColor: Highcharts.getOptions().colors[0]
    };

    var legend = {
        align: 'right',
        layout: 'vertical',
        margin: 0,
        verticalAlign: 'top',
        y: 25,
        symbolHeight: 280
    };

    var tooltip = {
        formatter: function () {
            return '<b>' + getPointCategoryName(this.point, 'x') + '</b> gibt  <b>' +
                this.point.value + "</b> Stimmen pro 1'000 eigenen <br>Wahlzetteln und pro " +  getPointCategoryName(this.point, 'y') + "-Kandidierendem <br>an die  <b>" + getPointCategoryName(this.point, 'y') + '</b> ab.</b>';
        }
    };

    var series = [{
        name: 'Panaschierstimmenflüsse',
        borderWidth: 1,
        data: [[0,0,''],
[0,1,36.9],
[0,2,28.3],
[0,3,7.7],
[0,4,6],
[0,5,5.4],
[0,6,5.8],
[0,7,11.4],
[0,8,15.3],
[1,0,42.3],
[1,1,''],
[1,2,48.8],
[1,3,19.6],
[1,4,17.2],
[1,5,22.1],
[1,6,7.4],
[1,7,7.2],
[1,8,23.6],
[2,0,31.7],
[2,1,53.6],
[2,2,''],
[2,3,33.6],
[2,4,24.8],
[2,5,22],
[2,6,10.8],
[2,7,7.4],
[2,8,26.5],
[3,0,8.2],
[3,1,22],
[3,2,31.4],
[3,3,''],
[3,4,55.9],
[3,5,24.1],
[3,6,7.5],
[3,7,3.3],
[3,8,21.7],
[4,0,8.9],
[4,1,24.9],
[4,2,33.1],
[4,3,82.9],
[4,4,''],
[4,5,34],
[4,6,13],
[4,7,3.3],
[4,8,25.8],
[5,0,20.1],
[5,1,52],
[5,2,48.4],
[5,3,40.8],
[5,4,45.2],
[5,5,''],
[5,6,12.6],
[5,7,5.3],
[5,8,31.7],
[6,0,17.9],
[6,1,24.2],
[6,2,31.1],
[6,3,14.9],
[6,4,18.6],
[6,5,20.4],
[6,6,''],
[6,7,41],
[6,8,24.3],
[7,0,39.7],
[7,1,15.8],
[7,2,16.9],
[7,3,5.6],
[7,4,5.4],
[7,5,3.1],
[7,6,33.1],
[7,7,''],
[7,8,18.8]
]
,
        dataLabels: {
            enabled: true,
            color: '#000000'
        }
    }];

   var responsive = {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                yAxis: {
                    labels: {
                        formatter: function () {
                            return this.value.charAt(0);
                        }
                    }
                }
            }
        }]
    };
    
   var legend = {
                	enabled: false,
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom',
                    padding: 25,
                    symbolPadding: 10,
                    symbolWidth: 25,
                    margin: -10,
                    itemStyle: {
                        fontWeight: 'normal'
                    }
                };

                var credits = {
                    text: "<b>Hinweis</b>: Je dunkler ein Feld eingefärbt ist, desto ausgeprägter war der Panaschierstimmenfluss zwischen<br>Herkunfts- und Empfängerpartei.<br><b>¹</b> Abgegebene Panaschierstimmen pro 1'000 Wahlzettel der Herkunftspartei und pro parteifremder<br>kandidierender Person<br>Berechnung: Dienststelle für Statistik Kanton Thurgau <br>Datenquellen: Staatskanzlei Kanton Thurgau",
                    href: false,
                    style: {
                        color: '#999999',
                        cursor: false,
                        fontSize: '10px'
                    },
                    position: {
                        align: 'left',
                        x: 10,
                        y: -70
                    }
                };
                var exporting = {
                    allowHTML: true,
                    enabled: true,
                    filename: '2020_03_Panaschierstimmfluesse_GRWahlen_BezArbon_2020',
                    buttons: {
                        contextButton: {
                            menuItems: "printChart separator downloadPNG downloadJPEG downloadSVG downloadXLS".split(" ")
                        }
                    },

                };
		var lang = {
            	contextButtonTitle: 'Drucken, Download, Export',
                downloadJPEG: 'Download JPEG Bild',
                downloadPNG: 'Download PNG Bild',
                downloadSVG: 'Download SVG Vektor Bild',
                printChart: 'Bild drucken',
                downloadXLS: 'Download XLS',
                viewData: 'Datentabelle anzeigen',
                decimalPoint: '.',
                thousandsSep: ' '
            };

var json = {};
        json.chart = chart;
        json.title = title;
        json.subtitle = subtitle;
        json.xAxis = xAxis;
        json.yAxis = yAxis;
        json.accessibility = accessibility;
        json.series = series;
        json.tooltip = tooltip;
        json.colorAxis = colorAxis;
        json.responsive = responsive;
        json.legend = legend;
        json.credits = credits;
        json.exporting = exporting;
        json.lang = lang;

        
        $('#2020_03_Panaschierstimmfluesse_GRWahlen_BezArbon_2020').highcharts(json);
    });


</script>
