<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
	<script src="https://highcharts.github.io/export-csv/export-csv.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
</head>

<center> 
    <div id="2023_08_Beschaeftigte_TG_2005_2021" style="height: 500px; max-width: 800px;"></div>
</center>

<script>
      $(document).ready(function() {
        var chart = {
            marginBottom: 80,
            type: 'waterfall',

        };
        var plotOptions = {
        	line: {
        		marker: {
            		enabled: false
        		}
    		}
    	};
        var title = {
          text: "Knapp 3'800 Beschäftigte mehr im Jahr 2021 als ein Jahr zuvor",
          style: {
            fontSize: '18px',
          },
          align: 'left'
        };
        var subtitle = {
          text: 'Entwicklung der Beschäftigtenzahlen im Kanton Thurgau, 2005-2021, in Anzahl Personen',
          style: {
            fontSize: '12px'
          },
          align: 'left'
        };
        var xAxis = [{
          categories:  ['2005','2005-08','2008-11','2012','2013','2014','2015','2016','2017','2018','2019','2020','2021'],
          reversed: false
        }];
       var yAxis = {
                gridLineWidth: 0,
                title: '',
                lineWidth: 1,
                tickInterval: 25000,
                labels: {
          	formatter: function () {
          		return (Highcharts.numberFormat(Math.abs(this.value),0));
          	}
   		  }             
                
               
            };
        var legend = {
          enabled: false
        };
        var series = [{
            id: 'S1',
            name: 'Beschäftigte',
            color: '#3CA433', 
            
            borderColor: 'transparent',
            data: [{name: '2005',
            y: 121875,
            x: 0
        }, {
            name: '2005-2008',
            y: 10111,
            x: 1
        }, {
            name: '2008-2011',
            y: -4192,
            x: 2,color: '#e39e00'
        }, {
            name: '2011-2012',
            y: 1501,
            x: 3
        }, {
            name: '2012-2013',
            y: 1387,
            x: 4
        }, {
            name: '2013-2014',
            y: 1678,
            x: 5
        }, {
            name: '2014-2015',
            y: 313,
            x: 6
        }, {
            name: '2015-2016',
            y: 1023,
            x: 7
        }, {
            name: '2016-2017',
            y: 2431,
            x: 8
        }, {
            name: '2017-2018',
            y: 1569,
            x: 9
        }, {
            name: '2018-2019',
            y: 2732,
            x: 10
        },  {
            name: '2019-2020',
            y: 307,
            x: 11
        },  {
            name: '2020-2021',
            y: 3681,
            x: 12
        },  {
            	name: '',
            	isSum: true,
                x: 12
            }]
        },];
        var credits = {
         text: 'Dienststelle für Statistik Kanton Thurgau <br>Datenquelle: Bundesamt für Statistik, Rückrechnung Betriebszählungen 2005, 2008, STATENT 2011-2021',
          href: false,
          position: {
            align: 'left',
            x: 10,
            y: -20
          },
          style: {
          	fontSize: '10px'
          }
        };
        var exporting = {
          allowHTML: true,
          enabled: true,
          filename:'2023_08_Beschaeftigte_TG_2005_2021',
          buttons: {
            contextButton: {
              menuItems: "printChart separator downloadPNG downloadJPEG downloadSVG separator downloadXLS separator viewData".split(" ")
            }
          },
          /*csv: {
            columnHeaderFormatter: function (item) {
              if(item instanceof Highcharts.Axis) {
                return 'Kategorie';
              } else {
                if(item instanceof Highcharts.Series) {
                  return item.name;
                }
              }
            }
          }*/
        };
            var tooltip = {formatter: function () {
            var s = '<b>' + this.x + '</b>';

			if(this.x == '2005'){
            	return s += '<br>Beschäftigte: <b>' + addThousandsep(this.y) 
			};
            if(this.x == '2005-08'){
            	return s += ':<br> <b>+' + addThousandsep(this.y) +' </b>Beschäftigte'
			};
            if(this.x == '2008-11'){
            	return s += ':<br> <b>' + addThousandsep(this.y)+ ' </b>Beschäftigte';
			};
            if(this.x == '2012'){
            	return s += ':<br><b>+' + addThousandsep(this.y) +' </b>Beschäftigte'
			};
            if(this.x == '2013'){
            	return s += ':<br><b>+' + addThousandsep(this.y) +' </b>Beschäftigte'
			};
             if(this.x == '2014'){
            	return s += ':<br><b>+' + addThousandsep(this.y) +' </b>Beschäftigte'
			};
             if(this.x == '2015'){
            	return s += ':<br><b>+' + addThousandsep(this.y) +' </b>Beschäftigte'
			};
             if(this.x == '2016'){
            	return s += ':<br><b>+' + addThousandsep(this.y) +' </b>Beschäftigte'
			};
             if(this.x == '2017'){
            	return s += ':<br><b>+' + addThousandsep(this.y) +' </b>Beschäftigte'
			};
            if(this.x == '2018'){
            	return s += ':<br><b>+' + addThousandsep(this.y) +' </b>Beschäftigte'
			};
          
             if(this.x == '2019'){
            	return s += ':<br><b>+' + addThousandsep(this.y) +' </b>Beschäftigte'
			};
          
             if(this.x == '2020'){
            	return s += ':<br><b>+' + addThousandsep(this.y) +' </b>Beschäftigte'
			};
            if(this.x == '2021'){
            	return s += ':<br><b>+' + addThousandsep(this.y) + ' </b>Beschäftigte:'+ 
                "<br>=<b>144'416</b> Beschäftigte" ;
                
			};            

            return s;
          },
          shadow: false,
          shared: true
        };
        
        var highchartsOptions = Highcharts.setOptions ({
        	lang: {
        		decimalPoint: '.',
        	 	thousandsSep: "'",
        	 	months: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
         		weekdays: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
           		shortMonths: ['Jan', 'Feb', 'Mrz', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
           		contextButtonTitle: 'Drucken, Download, Export',
           		downloadJPEG: 'Download JPEG Bild',
           		downloadPNG: 'Download PNG Bild',
           		downloadSVG: 'Download SVG Vektor Bild',
           		downloadXLS: 'Download XLS',
           		printChart: 'Bild drucken',
           		viewData: 'Datentabelle ein-/ausblenden',
			hideData: 'Datentabelle ein-/ausblenden',
           		resetZoom: "Zoom zurücksetzen",
           		resetZoomTitle: "Zoom zurücksetzen",
           		drillUpText: "Zurück"
        	}        
		});
        
        var json = {};
        json.chart = chart;
        json.plotOptions = plotOptions;
        json.title = title;
        json.subtitle = subtitle;
        json.xAxis = xAxis;
        json.yAxis = yAxis;
        json.legend = legend;
        json.series = series;
        json.credits = credits;
        json.exporting = exporting;
        json.tooltip = tooltip;
        json.highchartsOptions = highchartsOptions;
        
        $('#2023_08_Beschaeftigte_TG_2005_2021').highcharts(json);
      });
      
      function round(value, decimals) {
  		 return Number(Math.round(value+'e'+decimals)+'e-'+decimals);
	  }
      function addThousandsep(nStr) {
    		nStr += '';
    		x = nStr.split('.');
    		x1 = x[0];
    		x2 = x.length > 1 ? '.' + x[1] : '';
    		var rgx = /(\d+)(\d{3})/;
    		while (rgx.test(x1)) {
            	x1 = x1.replace(rgx, '$1' + "'" + '$2');
    		}
    		return x1 + x2;
		}
</script>

