<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/modules/exporting.js"></script>
    <script src="http://code.highcharts.com/modules/export-data.js"></script>
	<script src="http://highcharts.github.io/export-csv/export-csv.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://blacklabel.github.io/grouped_categories/grouped-categories.js"></script>
</head><center>
    <div id="2021_06_Unfallort_1992_2020" style="max-width: 800px; height: 500px"></div>
</center>    
<script>
        $(document).ready(function() {
        	var chart = {
            	 type: 'area',
            };
            var plotOptions = {
    			area: {
        			 stacking: 'normal',
                     marker: {
                     	enabled: false
                        }
				}
			};
            var title = {
                text: 'Die meisten Unfälle passieren Innerorts',
                style: {
                    fontSize: '18px'
                },
                align: 'left'
            };
            var subtitle = {
                text: 'Verkehrsunfälle mit Personenschaden nach Unfallort, Kanton Thurgau, 1992–2020, in Anzahl Unfällen',
                style: {
                    fontSize: '12px'
                },
                align: 'left'
            };
             var xAxis = {
            	tickColor: '#ffffff',
                tickInterval: 5,
                
                labels: {
                	rotation:0
                },
    			categories: [
        			'1992','1993','1994','1995','1996','1997','1998','1999','2000','2001','2002','2003','2004','2005','2006','2007','2008','2009','2010','2011','2012','2013','2014','2015','2016','2017',"2018","2019","2020"],
			};
            var yAxis = {
            	type: 'linear',
                max: 800,
                min: 0,
                tickInterval: 50,
                uniqueNames: false,
                lineWidth: 1,
                plotLines: [{
                	color: "#C0C0C0",
                	value: 0,
                	width: 3
                }],
                gridLineWidth: 0,
                title: ''
            };
            var tooltip = {
    formatter: function() {
        var s = '<b>'+ this.x +'</b>',
            sum = 0;

        $.each(this.points, function(i, point) {
            s += '<br/>'+ point.series.name +': <b>'+
                point.y +' Unfälle</b>'
            sum += point.y;
        });

        s += '<br/>Total: <b>'+sum + ' Unfälle'

        return s;
    },
    shared: true
};
            var legend = {
                layout: 'horizontal',
                align: 'center',
                verticalAlign: 'bottom',
    			padding: 25,
    			symbolPadding: 10,
    			symbolWidth: 25,
                margin: -10,
            	itemStyle: {
                fontWeight: 'normal'
            	}
            };
            var series = [{
                
               name: 'Auf der Autobahn',
                color: '#3CA433',
                index: 2,
                data: [16,	24,	31,	14,	20,	30,	24,	39,	20,	25,	28,	29,	29,	39,	32,	27,	15,	23,	21,	25,	24,	18,	23,	20,	13,	19,	19,	14,	12]
		},
            {
                name: 'Ausserorts',
                color: '#a2c510',
                index: 1,
                data: [178,226,192,175,170,187,189,212,194,240,237,237,221,241,186,209,190,189,205,204,198,158,194,166,134,177,178,161,144]
            },
            {
               name: 'Innerorts',
                color: '#FFED00',
                index: 0,
                data: [488,488,436,423,380,409,444,402,457,427,481,492,418,404,406,438,477,425,430,437,394,433,415,412,419,418,406,364,382
],
                marker: {
            		symbol: 'circle'
        		} 
            }];
            var credits = {
    			text: 'Dienststelle für Statistik Kanton Thurgau <br>Datenquelle: Bundesamt für Statistik, Strassenverkehrsunfälle',
    			href: false,
                style: {
                	color:'#999999',
                    cursor: false,
                    fontSize:'10px'
                },
    			position: {
      				align: 'left',
      				x: 10,
      				y: -20
    			}
  			};
            var exporting = {
            	allowHTML: true,
            	enabled: true,
                filename:'2021_06_Unfallort',
            	buttons: {
                	contextButton: {
                        menuItems: "printChart separator downloadPNG downloadJPEG downloadSVG separator downloadXLS viewData".split(" ")
                	}
            	},
                csv: {
                    columnHeaderFormatter: function (item) {
                    	if(item instanceof Highcharts.Axis) {
                        	return 'Quartal';
                        } else {
                        	if(item instanceof Highcharts.Series) {
                        		return item.name;
                            }
                        }
                    }
                }
            };
            var lang = {
            	contextButtonTitle: 'Drucken, Download, Export',
                downloadJPEG: 'Download JPEG Bild',
                downloadPNG: 'Download PNG Bild',
                downloadSVG: 'Download SVG Vektor Bild',
                printChart: 'Bild drucken',
                downloadXLS: 'Download XLS',
                viewData: 'Datentabelle ein-/ausblenden',
                decimalPoint: '.',
                thousandsSep: ' '
            };

            var json = {};
            json.chart = chart;
            json.plotOptions = plotOptions;
            json.title = title;
            json.subtitle = subtitle;
            json.xAxis = xAxis;
            json.yAxis = yAxis;
            json.tooltip = tooltip;
            json.legend = legend;
            json.series = series;
            json.credits = credits;
            json.exporting = exporting;
            json.lang = lang;

            $('#2021_06_Unfallort_1992_2020').highcharts(json);
        });
    </script>
