<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
	<script src="https://highcharts.github.io/export-csv/export-csv.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
	<script src="https://code.highcharts.com/maps/modules/map.js"></script>
    <script src="https://code.highcharts.com/maps/modules/exporting.js"></script>
	<script src="https://code.highcharts.com/mapdata/countries/ch/ch-all.js"></script>
</head>

<center> 
<div id="2017_BipVergleichSchweizKarte" style="height: 500px; max-width: 800px;"></div> 
</center> 

<script>
$(document).ready(function() {
    var chart = {
        map: 'countries/ch/ch-all',
        spacingBottom: 30
    };

    var title = {
        text: 'Thurgauer BIP pro Einwohner ist gesunken und liegt unter dem Schweizer Schintt',
        align: 'left'
    };

    var subtitle = {
        text: 'Schweiz und Kantone, 2015, provisorische Daten',
        align: 'left'
    };

    var mapNavigation = {
        enabled: true,
        buttonOptions: {
            verticalAlign: 'bottom',
            align: "right"
        }
    };

    var colorAxis = {
        minColor: '#00B4E8',
        maxColor: '#27408B'
    };

    var series = [{
    /*nw is ow, 7 is nw! bl is 3306*/
        data: [
    		['ch-fr', -0.1, 59407],
    		['ch-ne', 3.9, 87582],
    		['ch-ag', -1.8, 61689],
    		['ch-lu', 1, 66220],
		    ['ch-7', 0.4, 70259],
    		['ch-vs', 0.2, 53383],
    		['ch-sg', 0.1, 72479],
    		['ch-ar', 0.3, 56527],
    		['ch-ti', -0.4, 82479],
    		['ch-gl', 0.1, 68116],
    		['ch-gr', -1.5, 71240],
    		['ch-sz', 2, 59867],
    		['ch-tg', -0.2, 60409],
    		['ch-sh', 2.2, 86478],
    		['ch-ur', 2, 53347],
    		['ch-zh', 1, 96613],
    		['ch-zg', 1.1, 152708],
    		['ch-vd', -0.5, 68257],
    		['ch-3306', 0, 68730],
    		['ch-be', -0.2, 76897],
    		['ch-bs', 0.6, 168891],
    		['ch-so', 0, 66024],
    		['ch-nw', 1.1, 66019],
    		['ch-ai', 1.3, 61570],
    		['ch-ge', -2.4, 98436],
    		['ch-ju', -1.7, 63477]
		],
        joinBy: ['hc-key'],
        name: 'Veränderung des BIP zum Vorjahr',
        states: {
            hover: {
                color: '#B5B5B5'
            }
        },
        dataLabels: {
            enabled: true,
            style: {
            	fontWeight: 'normal',
                color: '#333333',
                textOutline: '2px contrast',
                fontSize: '12px'
            },
            formatter: function() {
            	switch (this.point.name) {
    				case "Fribourg":
        				return "Freiburg";
        				break;
    				case "Neuchâtel":
        				return "Neuenburg";
         				break;
    				case "Lucerne":
        				return "Luzern";
         				break;
    				case "Valais":
        				return "Wallis";
         				break;
    				case "Ticino":
        				return "Tessin";
         				break;
    				case "Graubünden":
        				return "Graubünden";
         				break;
    				case "Zürich":
        				return "Zürich";
                        break;
                    case "Vaud":
        				return "Waadt";
         				break;
                    case "Genève":
        				return "Genf";
                        break;
                    case this.point.name:
                    	return this.point.name;
            	}
        	}
        }
    }];
    
    var tooltip = {
    	useHTML: true,
    	formatter: function() {
        	switch (this.point.name) {
    				case "Fribourg":
        				return '<b>Freiburg</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>59'407 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(59407/78931*100,1) + ' %';
        				break;
    				case "Neuchâtel":
        				return '<b>Neuenburg</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>87'582 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(87582/78931*100,1) + ' %';
         				break;
    				case "Lucerne":
        				return '<b>Luzern</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>66'220 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(66220/78931*100,1) + ' %';
         				break;
    				case "Valais":
        				return '<b>Wallis</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>53'383 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(53383/78931*100,1) + ' %';
         				break;
    				case "Ticino":
        				return '<b>Tessin</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>82'479 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(82479/78931*100,1) + ' %';
         				break;
    				case "Graubünden":
        				return '<b>Graubünden</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>71'240 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(71240/78931*100,1) + ' %';
         				break;
    				case "Zürich":
        				return '<b>Zürich</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>96'613 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(96613/78931*100,1) + ' %';
                        break;
                    case "Vaud":
        				return '<b>Waadt</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>68'257 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(68257/78931*100,1) + ' %';
         				break;
                    case "Genève":
        				return '<b>Genf</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>98'436 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(98436/78931*100,1) + ' %';
                        break;
                    case "Aargau":
        				return '<b>Aargau</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>61'689 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(61689/78931*100,1) + ' %';
                        break;
                    case "Nidwalden":
        				return '<b>Niedwalden</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>70'259 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(70259/78931*100,1) + ' %';
                        break;
                    case "Sankt Gallen":
        				return '<b>Sankt Gallen</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>72'479 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(72479/78931*100,1) + ' %';
                        break;
                    case "Appenzell Ausserrhoden":
        				return '<b>Appenzell Ausserrhoden</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>56'527 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(56527/78931*100,1) + ' %';
                        break;
                    case "Glarus":
        				return '<b>Glarus</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>68'116 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(68116/78931*100,1) + ' %';
                        break;
                    case "Schwyz":
        				return '<b>Schwyz</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>59'867 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(59867/78931*100,1) + ' %';
                        break;
                    case "Thurgau":
        				return '<b>Thurgau</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>60'409 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(60409/78931*100,1) + ' %';
                        break;
                    case "Schaffhausen":
        				return '<b>Schaffhausen</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>86'478 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(86478/78931*100,1) + ' %';
                        break;
                    case "Uri":
        				return '<b>Uri</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>53'347 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(53347/78931*100,1) + ' %';
                        break;
                    case "Zug":
        				return '<b>Zug</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>152'708 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(152708/78931*100,1) + ' %';
                        break;
                    case "Basel-Landschaft":
        				return '<b>Basel-Landschaft</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>68'730 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(68730/78931*100,1) + ' %';
                        break;
                    case "Bern":
        				return '<b>Bern</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>76'897 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(76897/78931*100,1) + ' %';
                        break;
                    case "Basel-Stadt":
        				return '<b>Basel-Stadt</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>168'891 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(168891/78931*100,1) + ' %';
                        break;
                    case "Solothurn":
        				return '<b>Solothurn</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>66'024 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(66024/78931*100,1) + ' %';
                        break;
                    case "Obwalden":
        				return '<b>Obwalden</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>66'019 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(66019/78931*100,1) + ' %';
                        break;
                    case "Appenzell Innerrhoden":
        				return '<b>Appenzell Innerrhoden</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>61'570 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(61570/78931*100,1) + ' %';
                        break;
                    case "Jura":
        				return '<b>Jura</b><br>Veränderung des BIP zum Vorjahr:<b><font color=' + this.point.color + '> ' + this.point.value + " %</b></font><br>BIP pro Einwohner: <b>63'477 CHF</b><br>BIP Verlgleich zur Gesamtschweiz: " + round(63477/78931*100,1) + ' %';
                        break;
            }
        }
    };
    
    var plotOptions = {
    	map: {
    		borderColor: '#ffffff'
        }
    };
    
    var credits = {
    	text: 'Dienststelle für Statistik Kanton Thurgau <br>Datenquelle: Bundesamt für Statistik, Bruttoinlandprodukt nach Kantonen',
    	href: false,
        cursor: false,
    	position: {
    		align: 'left',
    		x: 10,
    		y: -20
    	},
    	style: {
    		fontSize: '10px',
            cursor: false
    	}
    };
    
	var exporting = {
		allowHTML: true,
        enabled: true,
        filename:'2017_BipVergleichSchweizKarte',
        buttons: {
        	contextButton: {
        		menuItems: "printChart separator downloadPNG downloadJPEG downloadSVG".split(" ")
            }
        },
        /*csv: {
        	columnHeaderFormatter: function (item) {
        		if(item instanceof Highcharts.Axis) {
        			return 'Kategorie';
        		} else {
        			if(item instanceof Highcharts.Series) {
                    	return item.name;
					}
            	}
            }
		}*/
	};
    
    var highchartsOptions = Highcharts.setOptions ({
    	lang: {
    		decimalPoint: '.',
    	 	thousandsSep: "'",
    	 	months: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
       		weekdays: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
       		shortMonths: ['Jan', 'Feb', 'Mrz', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
       		contextButtonTitle: 'Drucken, Download, Export',
       		downloadJPEG: 'Download JPEG Bild',
       		downloadPNG: 'Download PNG Bild',
       		downloadSVG: 'Download SVG Vektor Bild',
       		downloadXLS: 'Download XLS',
       		printChart: 'Bild drucken',
       		viewData: 'Datentabelle ein-/ausblenden',
       		resetZoom: "Zoom zurücksetzen",
       		resetZoomTitle: "Zoom zurücksetzen",
       		drillUpText: "Zurück"
   		}        
	});
   
    var json = {};
    json.chart = chart;
    json.title = title;
    json.subtitle = subtitle;
    json.mapNavigation = mapNavigation;
    json.colorAxis = colorAxis;
    json.series = series;
    json.tooltip = tooltip;
    json.plotOptions = plotOptions;
    json.credits = credits;
    json.exporting = exporting;
    json.highchartsOptions = highchartsOptions;
    
    $('#2017_BipVergleichSchweizKarte').highcharts('Map', json);
});

function round(value, decimals) {
  return Number(Math.round(value+'e'+decimals)+'e-'+decimals);
}
</script>


