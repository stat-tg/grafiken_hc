<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://highcharts.github.io/export-csv/export-csv.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://code.highcharts.com/modules/drilldown.js"></script>
    <script src="https://code.highcharts.com/modules/item-series.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
</head>

<center>
<div id="2020_06_Grossratsmandate_2020" style="height: 600px; max-width: 800px;"></div> 
</center> 
<script>
	$(document).ready(function() {
    	var chart = {
        	type: 'item'
        };
        var plotOptions = {
        	pie: {
            	dataLabels: {
                	enabled: false
            	},
                showInLegend: true
        	}
    	};
        var title = {
          text: "Die SVP bleibt stärkste Partei im Grossen Rat",
          style: {
            fontSize: '18px',
          },
          align: 'left'
        };
        var subtitle = {
          text: 'Grosser Rat Kanton Thurgau, Legislatur 2020-2024, in Anzahl Sitzen (Stand am Wahltag)',
          style: {
            fontSize: '12px'
          },
          align: 'left'
        };
    	var series = [{
        	innerSize: '40%',
        	name: 'Mandate',
        	colorByPoint: false,
            dataLabels: [{
            	enabled: false
                }],
            keys: ['name','y','label','color'],
        	data: [            
                ['SP',14,'SP','#CD3700'],  
                ['GP',15,'GP','#a2c510'],
                ['CVP',18,'CVP','#E39E00'],
                ['glp',9,'glp','#b3ee3a'],
                ['EVP',6,'EVP','#00B4E8'],    
                ['FDP',18,'FDP','#0064e6'],
                ['EDU',5,'EDU','#27408B'],
                ['SVP',45,'SVP','#3CA433']
        	],
            center: ['50%', '88%'],
        	size: '170%',
        	startAngle: -100,
        	endAngle: 100
    	}];
        
        var tooltip = {
            formatter: function() {
            	return '<span style="font-size:11px">' + this.point.name + '</span><br><span style="color:'+ this.point.color + '">\u25CF </span><span style="font-weight: bold;">'  + addThousandsep(this.point.y) + ' Sitze</b><br/>';
            }
    	};
        
        var legend = {
          layout: 'horizontal',
          align: 'center',
          verticalAlign: 'bottom',
          padding: 25,
          symbolPadding: 10,
          symbolWidth: 25,
          margin: -10,
          itemStyle: {
            fontWeight: 'normal'
          }
        };
        
        var credits = {
          text: 'Dienststelle für Statistik Kanton Thurgau <br>Datenquelle: Staatskanzlei Kanton Thurgau',
          href: false,
          style: {
          	cursor: false,
          	fontSize:'10px'
          },
          position: {
            align: 'left',
            x: 10,
            y: -20
          }
        };
        var exporting = {
          allowHTML: true,
          enabled: true,
          filename:'2020_06_Grossratsmandate_2020',
          buttons: {
            contextButton: {
              menuItems: "printChart separator downloadPNG downloadJPEG downloadSVG".split(" ")
            }
          },
          csv: {
            columnHeaderFormatter: function (item) {
              if(item instanceof Highcharts.Axis) {
                return 'Kategorie';
              } else {
                if(item instanceof Highcharts.Series) {
                  return item.name;
                }
              }
            }
          }
        };
        var highchartsOptions = Highcharts.setOptions ({
        	lang: {
        		decimalPoint: '.',
           	 	thousandsSep: "'",
           	 	months: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
            	weekdays: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
            	shortMonths: ['Jan', 'Feb', 'Mrz', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
            	contextButtonTitle: 'Drucken, Download, Export',
            	downloadJPEG: 'Download JPEG Bild',
            	downloadPNG: 'Download PNG Bild',
            	downloadSVG: 'Download SVG Vektor Bild',
            	downloadXLS: 'Download XLS',
            	printChart: 'Bild drucken',
            	viewData: 'Datentabelle ein-/ausblenden',
            	resetZoom: "Zoom zurücksetzen",
            	resetZoomTitle: "Zoom zurücksetzen",
            	drillUpText: "Zurück"
        	}        
		});
        var colors = ['#27408B','#0064e6','#00B4E8','#FFED00','#a2c510','#3CA433','#B5B5B5','#878787','#333333','#E39E00', '#CD3700','#8B0000']

        
        var json = {};
        json.chart = chart;
        json.plotOptions = plotOptions;
        json.title = title;
        json.subtitle = subtitle;
        json.series = series;
        json.tooltip = tooltip;
        json.legend = legend;
        json.credits = credits;
        json.exporting = exporting;
        json.highchartsOptions = highchartsOptions;
        json.colors = colors;
        
        
        $('#2020_06_Grossratsmandate_2020').highcharts(json);
    });
    
    
function addThousandsep(nStr) {
                               nStr += '';
                               x = nStr.split('.');
                               x1 = x[0];
                               x2 = x.length > 1 ? '.' + x[1] : '';
                               var rgx = /(\d+)(\d{3})/;
                               while (rgx.test(x1)) {
                x1 = x1.replace(rgx, '$1' + "'" + '$2');
                               }
                               return x1 + x2;
                               }


</script>
