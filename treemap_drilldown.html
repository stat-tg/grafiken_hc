<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://highcharts.github.io/export-csv/export-csv.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://code.highcharts.com/modules/drilldown.js"></script>
    <script src="https://code.highcharts.com/modules/heatmap.js"></script>
    <script src="https://code.highcharts.com/modules/treemap.js"></script>
</head>

<center>
<div id="2022_06_Exporte_Bestimmungsort_2021" style="height: 550px; max-width: 800px;"></div>
</center> 
<script>
	$(document).ready(function() {
    	var chart = {
            spacingBottom: 55
        };
        var plotOptions = {
        	pie: {
            	dataLabels: {
					enabled: false
            	},
                showInLegend: true
        	}
    	};
        var title = {
          text: '70 % aller Exporte gehen in die EU',
          style: {
            fontSize: '18px',
          },
          align: 'left'
        };
        var subtitle = {
          text: 'Exporte nach Bestimmungsort, Kanton Thurgau, 2021, Anteile in % (100 % = 4.718 Mrd. CHF)',
          style: {
            fontSize: '12px'
          },
          align: 'left'
        };
        var series = [{
        type: "treemap",
        layoutAlgorithm: 'sliceAndDice',
        alternateStartingDirection: true,
        allowTraversingTree: true,
        levelIsConstant: false,
        dataLabels: {
        	enabled: true
      },
        levels: [{
            level: 1,
            layoutAlgorithm: 'sliceAndDice',
            dataLabels: {
                enabled: true,
                align: 'left',
                verticalAlign: 'top',
                style: {
                    fontSize: '12px',
                    fontWeight: 'bold'
                }
            
        },
        level: 2,
            layoutAlgorithm: 'sliceAndDice',
            dataLabels: {
                enabled: true,
                align: 'left',
                verticalAlign: 'top',
                style: {
                    fontSize: '12px',
                    fontWeight: 'bold'
                }
            
        }}],
            
     data: [{
            id: 'Europa',
            name: 'Europa',
            color: "#3CA433"
        }, {
            id: 'Amerika',
            name: 'Amerika',
            color: "#a2c510"
        }, {
            id: 'Asien',
            name: 'Asien',
            color: '#FFED00',
            value: 363068
        }, {
            id: 'Afrika',
            name: 'Afrika',
            color: '#00B4E8',
            value: 107357
        }, {
            id: 'Ozeanien',
            name: 'Ozeanien',
            color: '#0064e6',
            value: 25928
        }, {
            name: 'EU',
            parent: 'Europa',
            id: 'EU',
            value: 2883730
        }, {
            name: 'Nicht-EU-Länder',
            id: 'Nicht-EU-Länder',
            parent: 'Europa',
            value: 204755
        }, {
            name: 'Nordamerika',
            id: 'Nordamerika',
            parent: 'Amerika',
            value: 449905
        }, {
            name: 'Lateinamerika',
            id: 'Lateinamerika',
            parent: 'Amerika',
            value: 71471
        }, {
            name: 'Deutschland',
            parent: 'EU',
            value: 1274891
        }, {
            name: 'Polen',
            parent: 'EU',
            value: 200460
        }, {
            name: 'Italien',
            parent: 'EU',
            value: 183151
        }, {
            name: 'Frankreich',
            parent: 'EU',
            value: 158177
          }, {
            name: 'Österreich',
            parent: 'EU',
            value: 146702
          }, {
            name: 'Rumänien',
            parent: 'EU',
            value: 132460
          }, {
            name: 'Dänemark',
            parent: 'EU',
            value: 123840
          }, {
            name: 'Schweden',
            parent: 'EU',
            value: 113157
          }, {
            name: 'Luxemburg',
            parent: 'EU',
            value: 84949
          }, {
            name: 'Tschechien',
            parent: 'EU',
            value: 80460
          }, {
            name: 'Belgien',
            parent: 'EU',
            value: 71804
          }, {
            name: 'Niederlande',
            parent: 'EU',
            value: 70040
          }, {
            name: 'Slowakei',
            parent: 'EU',
            value: 57963
          }, {
            name: 'Spanien',
            parent: 'EU',
            value: 44467
          }, {
            name: 'Portugal',
            parent: 'EU',
            value: 38816
          }, {
            name: 'Ungarn',
            parent: 'EU',
            value: 38503
          }, {
            name: 'Ver. Königreich',
            parent: 'Nicht-EU-Länder',
            value: 124463
          }, {
            name: 'Russland',
            parent: 'Nicht-EU-Länder',
            value: 29987
          }, {
            name: 'Norwegen',
            parent: 'Nicht-EU-Länder',
            value: 28112
          }, {
            name: 'USA',
            parent: 'Nordamerika',
            value: 297104
          }, {
            name: 'Kanada',
            parent: 'Nordamerika',
            value: 152777
          }, {
            name: 'Brasilien',
            parent: 'Lateinamerika',
            value: 30906
          }, {
            name: 'Mexiko',
            parent: 'Lateinamerika',
            value: 22714
          }, {
            name: 'China',
            parent: 'Asien',
            value: 112796
          }, {
            name: 'Türkei',
            parent: 'Asien',
            value: 31821
          }, {
            name: 'Japan',
            parent: 'Asien',
            value: 30279
          }, {
            name: 'Korea (Süd)',
            parent: 'Asien',
            value: 25994
          }, {
            name: 'Botsuana',
            parent: 'Afrika',
            value: 63467
          }, {
            name: 'Australien',
            parent: 'Ozeanien',
            value: 23253
        }]
    }];
        
        var tooltip = {
           valueSuffix: " %"
    	};
        var legend = {
                layout: 'horizontal',
                align: 'center',
                verticalAlign: 'bottom',
				padding: 25,
				itemDistance: 10,
    			symbolPadding: 10,
    			symbolWidth: 25,
                margin: -10,
				itemStyle: {
                	fontWeight: 'normal'
            	}
            };
            
        var credits = {
                text: '<b>Hinweis: Markieren Sie den gewünschten Bereich, um diesen zu vergrössern.</b><br>Dienststelle für Statistik Kanton Thurgau <br>Datenquelle: Bundesamt für Zoll und Grenzsicherheit',
          href: false,
          style: {
          	cursor: false,
          	fontSize:'10px'
          },
          position: {
            align: 'left',
            x: 10,
            y: -40
          }
        };
        var exporting = {
          allowHTML: true,
          enabled: true,
          filename:'2022_06_Exporte_Bestimmungsort_2021',
          buttons: {
            contextButton: {
              menuItems: "printChart separator downloadPNG downloadJPEG downloadSVG separator downloadXLS separator viewData".split(" ")
            }
          },
          csv: {
            columnHeaderFormatter: function (item) {
              if(item instanceof Highcharts.Axis) {
                return 'Kategorie';
              } else {
                if(item instanceof Highcharts.Series) {
                  return item.name;
                }
              }
            }
          }
        };
        var highchartsOptions = Highcharts.setOptions ({
        	lang: {
        		decimalPoint: '.',
           	 	thousandsSep: "'",
           	 	months: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
            	weekdays: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
            	shortMonths: ['Jan', 'Feb', 'Mrz', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
            	contextButtonTitle: 'Drucken, Download, Export',
            	downloadJPEG: 'Download JPEG Bild',
            	downloadPNG: 'Download PNG Bild',
            	downloadSVG: 'Download SVG Vektor Bild',
            	downloadXLS: 'Download XLS',
            	printChart: 'Bild drucken',
            	viewData: 'Datentabelle einblenden',
		hideData: 'Datentabelle ausblenden',
            	resetZoom: "Zoom zurücksetzen",
            	resetZoomTitle: "Zoom zurücksetzen",
            	drillUpText: "Zurück"
        	}        
		});

        
        var json = {};
        json.chart = chart;
        json.plotOptions = plotOptions;
        json.title = title;
        json.subtitle = subtitle;
        json.series = series;
        json.tooltip = tooltip;
        json.legend = legend;
        json.credits = credits;
        json.exporting = exporting;
        json.highchartsOptions = highchartsOptions;
        
        
        $('#2022_06_Exporte_Bestimmungsort_2021').highcharts(json);
    });
    
    
function addThousandsep(nStr) {
                               nStr += '';
                               x = nStr.split('.');
                               x1 = x[0];
                               x2 = x.length > 1 ? '.' + x[1] : '';
                               var rgx = /(\d+)(\d{3})/;
                               while (rgx.test(x1)) {
                x1 = x1.replace(rgx, '$1' + "'" + '$2');
                               }
                               return x1 + x2;
                               }


</script>
